<?php
 namespace Pmpr\Package\Jalali\Area; use Pmpr\Common\Foundation\Manipulate\Post\ManipulatePost; use Pmpr\Common\Foundation\Manipulate\Theme\ManipulateHTML; use Pmpr\Package\Jalali\Setting; use WP_Query; class Admin extends Common { public function addActions() { if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_DATES, false)) { goto ZSXU8; } $this->addAction("\154\157\141\144\x2d\145\144\x69\x74\56\x70\150\160", [$this, "\154\157\141\144\105\144\x69\x74\x50\x68\x70"], 10)->addAction("\x6c\x6f\x61\144\x2d\x75\160\154\x6f\141\x64\x2e\x70\x68\x70", [$this, "\x6c\157\141\144\105\x64\151\x74\x50\x68\160"], 10)->addAction("\162\145\163\x74\x72\x69\143\x74\137\x6d\x61\156\x61\x67\145\137\x70\157\x73\164\x73", [$this, "\162\x65\163\164\x72\151\143\x74\115\141\x6e\141\147\x65\120\x6f\x73\164\163"])->addFilter("\167\x70\137\144\141\x74\x65", [$this, "\x77\160\104\x61\x74\145"], 9999, 3); ZSXU8: $this->addAction("\155\143\145\137\x63\163\x73", [$this, "\155\143\x65\x43\x73\163"])->addAction("\155\x65\x64\151\141\x5f\142\165\x74\x74\157\156\163", [$this, "\162\145\156\x64\x65\162\105\144\x69\x74\x69\x6e\147\102\x75\x74\164\157\x6e"], 21)->addAction("\154\157\x61\x64\55\x6f\x70\164\151\157\x6e\163\x2d\147\x65\x6e\145\162\141\x6c\x2e\x70\x68\x70", [$this, "\x6c\157\x61\144\x47\145\x6e\x65\x72\x61\x6c\117\x70\164\151\157\x6e\x73"], 10)->addAction("\163\141\x76\145\x5f\160\157\163\x74", [$this, "\143\x6f\156\x76\x65\x72\x74\x50\x6f\163\x74\x4c\145\x74\x74\145\162\x73\101\156\x64\116\x75\x6d\x62\x65\162\x73"], 10, 2); parent::addActions(); } public function addFilters() { $this->addFilter("\x6d\143\x65\137\x62\x75\x74\x74\157\x6e\163", [$this, "\x6d\143\145\x42\x75\164\164\x6f\x6e\163"])->addFilter("\x63\x6f\155\155\x65\156\x74\x5f\163\x61\x76\145\137\160\x72\145", [$this, "\165\x70\144\141\x74\x65\x43\x6f\x6d\155\x65\x6e\x74"])->addFilter("\155\143\x65\137\x65\x78\164\x65\162\156\x61\x6c\x5f\160\x6c\x75\147\x69\x6e\163", [$this, "\155\x63\145\x45\170\164\145\162\x6e\x61\x6c\120\154\x75\147\151\x6e\x73"]); if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_DATES)) { goto nr0Y4; } $this->addFilter("\160\162\x65\137\x67\x65\x74\x5f\160\157\x73\164\x73", [$this, "\146\151\x6c\164\145\162\x50\157\163\164\x73"])->addFilter("\x64\x61\x74\x65\137\151\x31\x38\156", [$this, "\144\141\164\x65\x49\61\x38\156"], 10, 4)->addFilter("\x64\x61\164\x65\137\x66\x6f\162\155\141\x74\163", [$this, "\x64\x61\x74\145\x46\x6f\162\155\x61\x74\163"], 10, 1)->addFilter("\160\x6f\163\164\x5f\144\141\164\x65\137\x63\157\x6c\165\155\x6e\137\164\151\x6d\x65", [$this, "\160\x6f\163\164\103\x6f\154\x75\155\156\x54\151\155\x65"], 10, 2)->addFilter("\144\151\163\x61\x62\154\145\x5f\x6d\x6f\x6e\x74\150\x73\137\x64\162\x6f\160\x64\x6f\167\x6e", [$this, "\x64\x69\163\x61\142\154\145\115\x6f\156\164\x68\x73\104\x72\x6f\160\x64\157\167\156"], 10, 2)->addFilter("\141\x6a\141\x78\137\161\165\x65\162\171\137\141\164\164\x61\143\x68\x6d\145\x6e\164\163\x5f\141\162\x67\163", [$this, "\x61\152\141\170\x51\165\x65\x72\171\101\x74\x74\141\x63\150\155\x65\x6e\x74\163\101\x72\147\163"], 10, 1)->addFilter("\155\145\x64\x69\x61\137\154\x69\142\x72\x61\162\x79\137\155\157\x6e\164\x68\x73\x5f\x77\151\164\x68\137\146\x69\154\x65\x73", [$this, "\155\x65\144\x69\141\114\151\142\162\x61\162\x79\115\x6f\x6e\x74\150\163\x57\151\x74\x68\106\151\154\145\x73"], 10, 0); nr0Y4: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto sNbfh; } $this->addFilter("\x74\x68\x65\x5f\164\151\x74\x6c\x65", [$this, "\x74\x72\x61\x6e\163\154\x61\164\x65\x4e\165\155\x62\x65\162\x73"], 999)->addFilter("\156\165\155\142\x65\162\x5f\x66\157\162\155\x61\164\x5f\151\61\x38\x6e", [$this, "\x74\x72\x61\156\163\154\141\164\145\116\165\155\142\145\x72\x73"]); sNbfh: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto vH9u7; } $this->addFilter("\164\150\145\137\x74\151\x74\154\145", [$this, "\164\x72\141\x6e\x73\154\141\164\x65\114\x65\x74\164\x65\162\163"], 999); vH9u7: parent::addFilters(); } public function loadEditPhp() { $this->addFilter("\x70\157\x73\x74\x73\x5f\x77\x68\145\162\145", [$this, "\x70\157\x73\x74\163\127\x68\x65\x72\x65"])->addFilter("\160\x72\x65\x5f\x67\145\x74\137\x70\x6f\163\x74\163", [$this, "\x66\151\154\x74\145\x72\x50\x6f\x73\x74\163"]); } public function filterPosts($LRRMY) { if (!($LRRMY instanceof WP_Query && $LRRMY->is_main_query())) { goto dcFCb; } $ewMJr = $LRRMY->get("\155"); $beZGP = $LRRMY->get("\150\x6f\x75\x72"); $Lznk_ = $LRRMY->get("\155\151\x6e\165\x74\x65"); $zH3k8 = $LRRMY->get("\163\x65\x63\x6f\156\x64"); $BOQ31 = $LRRMY->get("\x79\145\x61\162"); $cKBgb = $LRRMY->get("\155\157\156\164\x68\x6e\165\155"); $DAD0z = $LRRMY->get("\144\141\x79"); if (empty($ewMJr)) { goto jdnkD; } $J5402 = strlen($ewMJr); $BOQ31 = substr($ewMJr, 0, 4); if (!($J5402 > 5)) { goto F7BoE; } $cKBgb = substr($ewMJr, 4, 2); F7BoE: if (!($J5402 > 7)) { goto MWSWf; } $DAD0z = substr($ewMJr, 6, 2); MWSWf: if (!($J5402 > 9)) { goto Nj8tI; } $beZGP = substr($ewMJr, 8, 2); Nj8tI: if (!($J5402 > 11)) { goto BAWjS; } $Lznk_ = substr($ewMJr, 10, 2); BAWjS: if (!($J5402 > 13)) { goto YEihb; } $zH3k8 = substr($ewMJr, 12, 2); YEihb: jdnkD: if (!($BOQ31 && $BOQ31 < 1700)) { goto SRqQK; } $nlr86 = $BOQ31 % 33 % 4 - 1 == (int) ($BOQ31 % 33 * 0.05) ? 1 : 0; $i_e1u = date("\131\55\155\x2d\x64\x20\110\72\151\72\163", $this->makeTime(0, 0, 0, 1, 1, $BOQ31)); $xV7QX = date("\131\55\x6d\x2d\x64\40\x48\72\x69\72\163", $this->makeTime(0, 0, 0, 1, 1, $BOQ31 + 1)); if (empty($cKBgb)) { goto ZGnvD; } $WStPW = $this->makeTime(0, 0, 0, $cKBgb, 1, $BOQ31); $i_e1u = date("\131\x2d\155\x2d\x64\x20\x48\x3a\x69\72\163", $WStPW); $JmMYD = $cKBgb <= 6 ? $JmMYD = 31 * 24 * 3600 : ($cKBgb == 12 && !$nlr86 ? 29 * 24 * 3600 : 30 * 24 * 3600); $xV7QX = date("\x59\x2d\x6d\x2d\x64\40\110\72\x69\72\163", $WStPW + $JmMYD); ZGnvD: if (empty($DAD0z)) { goto fEJg8; } $WStPW = $this->makeTime(0, 0, 0, $cKBgb, $DAD0z, $BOQ31); $i_e1u = date("\x59\x2d\x6d\55\144\40\110\72\151\x3a\163", $WStPW); $JmMYD = 1 * 24 * 3600; $xV7QX = date("\x59\55\x6d\x2d\144\40\x48\72\x69\x3a\163", $WStPW + $JmMYD); fEJg8: if (empty($beZGP)) { goto VcNbJ; } $WStPW = $this->makeTime($beZGP, 0, 0, $cKBgb, $DAD0z, $BOQ31); $i_e1u = date("\x59\x2d\155\55\144\40\x48\x3a\x69\x3a\x73", $WStPW); $JmMYD = 1 * 3600; $xV7QX = date("\131\55\x6d\55\x64\x20\110\x3a\x69\x3a\163", $WStPW + $JmMYD); VcNbJ: if (empty($Lznk_)) { goto YUx7g; } $WStPW = $this->makeTime($beZGP, $Lznk_, 0, $cKBgb, $DAD0z, $BOQ31); $i_e1u = date("\x59\55\x6d\55\x64\x20\x48\x3a\x69\x3a\163", $WStPW); $JmMYD = 1 * 60; $xV7QX = date("\x59\x2d\x6d\x2d\144\x20\x48\x3a\x69\72\x73", $WStPW + $JmMYD); YUx7g: if (empty($zH3k8)) { goto h2E_v; } $WStPW = $this->makeTime($beZGP, $Lznk_, $zH3k8, $cKBgb, $DAD0z, $BOQ31); $i_e1u = date("\131\55\155\x2d\x64\40\x48\72\x69\72\163", $WStPW); $JmMYD = 1; $xV7QX = date("\131\x2d\155\55\144\x20\x48\x3a\151\72\x73", $WStPW + $JmMYD); h2E_v: $FhC_Y = [["\141\146\x74\x65\x72" => $i_e1u, "\x62\145\x66\x6f\x72\145" => $xV7QX]]; $LRRMY->set("\x64\x61\164\145\x5f\161\165\145\162\x79", $FhC_Y); SRqQK: dcFCb: } public function mceButtons($k1bXz) { array_push($k1bXz, "\163\145\160\x61\162\x61\164\157\x72", "\x6c\x74\x72", "\162\164\x6c"); return $k1bXz; } public function dateFormats($z1_AV) { return array_merge($z1_AV, ["\x64\40\106\x20\x59", "\131\x2f\155\x2f\x64", "\144\40\160\40\131"]); } public function renderEditingButton() { if (!$this->canAddVirastar()) { goto uIcbP; } $rybbH = ManipulateHTML::generateSpan('', ["\x63\154\141\163\x73" => "\x77\x70\x2d\x6d\x65\x64\x69\x61\55\142\165\x74\x74\157\156\163\55\x69\143\157\x6e\x20\x64\x61\x73\150\x69\x63\x6f\156\x73\x20\144\141\x73\x68\151\x63\157\x6e\x73\55\x65\144\x69\164"]); ManipulateHTML::renderCloseableElement("\141", ["\151\144" => "\x76\151\x72\141\x73\164\x61\162", "\143\154\141\163\x73" => "\x62\165\x74\x74\x6f\x6e\x20\x76\x69\x72\141\163\164\141\162", "\x64\x61\x74\141\55\x77\151\144\x74\150" => 800], [$rybbH, __("\x57\162\x69\164\151\x6e\147\40\x43\157\162\162\x65\x63\x74\x69\x6f\x6e", PR__PKG__JALALI)]); uIcbP: } public function mceCss($NOBMn) { $n3q6b = $this->getAssetManager()->get("\x74\x69\x6e\171\x6d\x63\x65\56\143\163\163"); if (!$n3q6b) { goto feCfW; } $NOBMn .= "\54\x20{$n3q6b}"; $clCom = $this->getSettingByKey(Setting::ADMIN_FONT); $clCom = $this->getSettingObj()->getFonts($clCom); if (!is_string($clCom)) { goto FlKwV; } $NOBMn .= "\54\x20{$clCom}"; FlKwV: feCfW: return $NOBMn; } public function loadGeneralOptions() { $fdV7n = $this->getSettingByKey(Setting::FRONT_CONVERT_DATES, false); $Oreuv = $this->getSettingByKey(Setting::ADMIN_CONVERT_DATES, false); if (!$Oreuv && $fdV7n) { goto k8UuC; } if ($Oreuv && !$fdV7n) { goto FyTeS; } goto Rq187; k8UuC: $this->addFilter("\x64\x61\x74\145\x5f\x69\x31\x38\x6e", [$this, "\144\141\164\x65\x49\61\x38\156"], 10, 4); goto Rq187; FyTeS: $this->removeFilter("\144\141\164\145\137\x69\61\70\156", [$this, "\144\141\164\145\x49\61\x38\x6e"]); Rq187: } public function restrictManagePosts() { global $RW1_Q, $wpdb; $ibwTz = $wpdb->get_results($wpdb->prepare("\xa\11\x9\11\123\105\114\105\x43\x54\40\x44\111\123\x54\111\x4e\x43\x54\x20\131\x45\x41\x52\50\x20\x70\x6f\x73\164\137\144\x61\x74\145\40\51\x20\101\x53\x20\x79\145\x61\x72\x2c\40\x4d\117\x4e\x54\110\x28\x20\160\x6f\x73\x74\x5f\x64\x61\164\x65\40\x29\x20\101\x53\x20\155\x6f\156\x74\x68\54\x20\x44\x41\x59\50\x20\x70\157\x73\164\137\x64\141\164\145\x20\51\x20\141\x73\40\144\141\171\12\11\x9\x9\106\122\x4f\115\40{$wpdb->posts}\xa\11\11\x9\127\x48\x45\122\x45\x20\160\x6f\163\164\x5f\164\x79\160\x65\x20\75\40\45\163\x20\101\116\x44\40\160\157\x73\x74\137\163\164\x61\x74\165\163\x20\74\76\x20\47\x61\x75\164\x6f\x2d\144\162\141\146\x74\x27\xa\11\x9\x9\x4f\x52\104\x45\x52\x20\102\131\40\x70\157\163\x74\x5f\x64\x61\164\x65\40\104\x45\123\x43\12\x9\11\x9", $RW1_Q)); $QBBmS = count($ibwTz); if (!(!$QBBmS || 1 == $QBBmS && 0 == $ibwTz[0]->month)) { goto eFJi3; } return; eFJi3: $ewMJr = isset($_GET["\155"]) ? (int) $_GET["\x6d"] : 0; $wS7sb = 0; $Ht_gt = ManipulateHTML::generateCloseableElement("\x6f\x70\164\x69\157\156", [selected($ewMJr, 0, false), "\166\141\x6c\165\145" => 0]); foreach ($ibwTz as $cPMhv) { if (!(0 == $cPMhv->year)) { goto vonEO; } goto HEAuu; vonEO: $cKBgb = zeroise($cPMhv->month, 2); $BOQ31 = $cPMhv->year; $OQ_R9 = mktime(0, 0, 0, $cKBgb, $cPMhv->day, $BOQ31); $Tqk7g = $this->persianDate($OQ_R9, "\x46\40\131"); $mwY1F = $this->persianDate($OQ_R9, "\x59\x6d", "\145\156"); if (!($wS7sb != $mwY1F)) { goto eEA9V; } $Ht_gt .= ManipulateHTML::generateCloseableElement("\x6f\x70\x74\151\157\156", [selected($ewMJr, $mwY1F, false), "\x76\x61\x6c\x75\x65" => $mwY1F], $Tqk7g); eEA9V: $wS7sb = $mwY1F; HEAuu: } UJ5EA: ManipulateHTML::renderCloseableElement("\x73\x65\154\x65\x63\164", ["\143\154\141\x73\x73" => "\155"], $Ht_gt); } public function postColumnTime($G3VfU, $post) { if (!$post) { goto vZc3Q; } $q1WZ1 = ManipulatePost::getDate("\x59\x2f\155\x2f\144\x20\x48\72\x69\72\x73", $post, false); if (!$q1WZ1) { goto dvKDv; } $G3VfU = $this->persianDate($q1WZ1, "\144\x20\106\40\131\x20\110\72\151"); dvKDv: vZc3Q: return $G3VfU; } public function mceExternalPlugins($AsGz8) { $AsGz8["\144\x69\162\x65\143\x74\151\x6f\x6e\x61\154\151\x74\x79"] = includes_url("\152\163\57\x74\x69\x6e\x79\x6d\x63\145\x2f\x70\154\x75\x67\151\x6e\163\x2f\144\151\x72\145\x63\x74\151\157\x6e\x61\154\x69\x74\x79\57\160\154\x75\147\x69\x6e\x2e\155\151\156\x2e\152\163"); return $AsGz8; } public function mediaLibraryMonthsWithFiles() { global $wpdb, $EULSU; $O7HN4 = 1; Xfi0Q: if (!($O7HN4 <= 12)) { goto zZVDu; } $EULSU->month[str_pad(strval($O7HN4), 2, "\60", STR_PAD_LEFT)] = $this->getConverter()->monthName($O7HN4); $EULSU->month_abbrev[$this->getConverter()->monthName($O7HN4)] = $this->getConverter()->monthName($O7HN4); T8rKR: $O7HN4++; goto Xfi0Q; zZVDu: $ibwTz = $wpdb->get_results($wpdb->prepare("\12\x9\11\x9\123\105\x4c\x45\103\124\x20\x44\x49\123\x54\111\x4e\103\124\40\x59\x45\101\122\x28\40\160\157\163\x74\137\x64\141\164\x65\40\x29\x20\101\123\x20\x79\x65\141\x72\54\40\x4d\117\116\x54\x48\x28\x20\160\157\163\164\137\144\141\x74\145\40\51\40\101\123\x20\155\157\156\x74\150\x2c\40\104\x41\x59\x28\x20\x70\x6f\163\x74\137\144\x61\164\x65\x20\51\x20\141\163\40\x64\x61\x79\xa\x9\x9\x9\x46\x52\x4f\115\40{$wpdb->posts}\12\11\11\11\x57\x48\x45\x52\105\40\x70\x6f\163\x74\x5f\164\x79\160\145\x20\75\x20\x25\x73\xa\11\x9\11\117\x52\x44\105\122\x20\102\131\40\160\157\x73\164\x5f\x64\x61\x74\145\40\x44\105\x53\103", "\x61\x74\164\141\143\x68\x6d\145\156\x74")); $HawJa = ''; foreach ($ibwTz as $KZ8g0 => $ECnws) { if (!($HawJa == $ECnws->year . $ECnws->month)) { goto juvAl; } unset($ibwTz[$KZ8g0]); goto AfwfJ; juvAl: $HawJa = $ECnws->year . $ECnws->month; [$ECnws->year, $ECnws->month] = $this->getConverter()->gregorian2persian($ECnws->year, $ECnws->month, $ECnws->day); AfwfJ: } Y1r1k: return $ibwTz; } public function convertPostLettersAndNumbers($post) { $post = ManipulatePost::get($post); if (!$post) { goto kfDHx; } if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto uSsJN; } $post->post_title = $this->translateNumbers($post->post_title); $post->post_content = $this->translateNumbers($post->post_content); $post->post_excerpt = $this->translateNumbers($post->post_excerpt); uSsJN: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto UaE9e; } $post->post_title = $this->translateLetters($post->post_title); $post->post_content = $this->translateLetters($post->post_content); $post->post_excerpt = $this->translateLetters($post->post_excerpt); UaE9e: kfDHx: return $post; } public function ajaxQueryAttachmentsArgs($LRRMY = []) { if (!(!isset($LRRMY["\171\x65\141\162"]) || !isset($LRRMY["\x6d\157\156\x74\x68\x6e\165\x6d"]) || empty($LRRMY["\171\145\141\x72"]) || $LRRMY["\x79\145\141\162"] == "\x66\141\x6c\163\x65" || $LRRMY["\x6d\x6f\156\164\150\x6e\165\155"] == "\x66\141\154\x73\x65")) { goto pdOBt; } return $LRRMY; pdOBt: $cKBgb = $LRRMY["\x6d\157\156\x74\x68\156\x75\155"]; $BOQ31 = $LRRMY["\x79\145\x61\x72"]; $WStPW = $this->makeTime(0, 0, 0, $cKBgb, 1, $BOQ31); $i_e1u = date("\131\55\x6d\x2d\144\x20\x48\x3a\151\72\x73", $WStPW); $nlr86 = $BOQ31 % 33 % 4 - 1 == (int) ($BOQ31 % 33 * 0.05) ? 1 : 0; $JmMYD = $cKBgb <= 6 ? $JmMYD = 31 * 24 * 3600 : ($cKBgb == 12 && !$nlr86 ? 29 * 24 * 3600 : 30 * 24 * 3600); $xV7QX = date("\131\x2d\155\x2d\x64\x20\x48\72\151\x3a\x73", $WStPW + $JmMYD); $LRRMY["\144\x61\x74\x65\x5f\161\x75\145\x72\171"] = ["\141\x66\x74\x65\162" => $i_e1u, "\x62\x65\146\x6f\x72\x65" => $xV7QX]; $LRRMY["\155\x6f\156\164\x68\156\165\155"] = ''; $LRRMY["\x79\x65\141\x72"] = ''; return $LRRMY; } public function disableMonthsDropdown($GICHF, $RW1_Q) { $ZHAdQ = $GICHF; $ssQjK = ["\160\157\163\x74", "\160\x61\x67\145", "\141\x74\x74\x61\143\x68\155\x65\x6e\164"]; if (!in_array($RW1_Q, $ssQjK)) { goto v8UhO; } $ZHAdQ = true; v8UhO: return $ZHAdQ; } }
