<?php
 namespace Pmpr\Package\Jalali\Area; use Pmpr\Common\Foundation\Decorator\DecoratorI18N; use Pmpr\Common\Foundation\Decorator\DecoratorUser; use Pmpr\Common\Foundation\Manipulate\ManipulateSetting; use Pmpr\Common\Foundation\Manipulate\Taxonomy\ManipulateTerm; use Pmpr\Package\Jalali\Container; use Pmpr\Package\Jalali\Converter; use Pmpr\Package\Jalali\Setting; use Pmpr\Package\Jalali\Translator; use WP_Comment; use WP_Locale; class Common extends Container { protected ?string $locale = null; protected ?Converter $converter = null; protected ?Translator $translator = null; public function __construct() { goto kuoKI; KZFpd: $this->translator = Translator::getInstance(); goto ZSnhk; kuoKI: $this->converter = Converter::getInstance(); goto KZFpd; ZSnhk: parent::__construct(); goto omG_R; omG_R: } public function getConverter() : ?Converter { return $this->converter; } public function getTranslator() : ?Translator { return $this->translator; } public function addActions() { $this->addAction("\151\x6e\x69\x74", [$this, "\151\156\151\164"]); parent::addActions(); } public function addFilters() { $this->addFilter("\x67\x65\x74\137\x74\145\162\155", [$this, "\x67\145\164\x54\145\x72\155"])->addFilter("\x67\x65\x74\137\x63\157\x6d\x6d\x65\x6e\x74", [$this, "\165\x70\x64\141\x74\145\x43\157\x6d\x6d\x65\x6e\x74"])->addFilter("\x6c\x6f\143\x61\154\145", [$this, "\163\145\x74\x4c\157\143\x61\154\x65"], 10)->addFilter("\x67\x65\x74\x5f\x74\150\x65\x5f\144\x61\x74\x65", [$this, "\x70\x65\x72\x73\x69\141\x6e\104\141\164\x65"], 99, 3); parent::addFilters(); } public function init() { $this->updateNumberFormat(); } public function translateWord($WzKA1, $FFOOb = "\x66\141") { goto GVR8o; PJNMo: $FFOOb = DecoratorI18N::getLocale(); goto H3FG8; H3FG8: pivUW: goto yObIu; yObIu: return $this->getTranslator()->translate($WzKA1, $FFOOb); goto cqJ2v; GVR8o: if ($FFOOb) { goto pivUW; } goto PJNMo; cqJ2v: } public function translateNumber($z8EDG, $FFOOb = "\x66\141", $iQBPC = "\331\253") { goto jv39T; cHxy_: S1VR1: goto sjxfw; r53A3: $FFOOb = DecoratorI18N::getLocale(); goto cHxy_; sjxfw: return $this->getTranslator()->translateNumber($z8EDG, $FFOOb, $iQBPC); goto LkqZH; jv39T: if ($FFOOb) { goto S1VR1; } goto r53A3; LkqZH: } public function getTerm($UwDY1) { goto y6sGV; y6sGV: $UwDY1 = ManipulateTerm::get($UwDY1); goto JmtrK; xhNQf: gHsKM: goto RYfBs; RYfBs: return $UwDY1; goto eI4UR; RTKrf: $UwDY1->name = $this->translateNumbers($UwDY1->name); goto R1TvA; UtdMT: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto X92q0; } goto RTKrf; JmtrK: if (!$UwDY1) { goto gHsKM; } goto UtdMT; lLZen: Ok71Z: goto xhNQf; V002N: $UwDY1->name = $this->translateLetters($UwDY1->name); goto lLZen; VKJ4N: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto Ok71Z; } goto V002N; R1TvA: X92q0: goto VKJ4N; eI4UR: } public function postsWhere($et2fo) { goto COvOu; xQzWV: $cEbH0 = $wp_query->get("\x68\x6f\x75\x72"); goto UhOxy; yfnym: $fKdEM = substr($K1Tto, 4, 2); goto F0VLL; Zpkzb: if (!($K1Tto != '' && $K1Tto != "\60")) { goto e5UId; } goto MnTJg; RmG8y: ofjaa: goto dosqc; COvOu: global $wpdb, $wp_query; goto TfbLe; aBnWW: if (!($e7EKc < 1700 && $e7EKc > 1300)) { goto fjcqI; } goto Nt5oV; F0VLL: $KZUd1 = substr($K1Tto, 6, 2); goto pJGxf; a9VAF: $e7EKc = substr($K1Tto, 0, 4); goto yfnym; Npm_T: e5UId: goto aBnWW; dosqc: return $et2fo; goto wUxyR; TfbLe: if (is_null($wp_query)) { goto ofjaa; } goto cI_1v; cI_1v: $K1Tto = $wp_query->get("\155"); goto M4_1e; Nt5oV: $SyPql = ["\57\131\x45\x41\x52\134\50\133\x5c\163\135\52{$wpdb->posts}\x2e\160\157\163\x74\x5f\144\141\164\x65\x5b\x5c\163\135\x2a\134\x29\133\134\x73\x5d\52\x3d\133\134\163\135\52" . $e7EKc . "\x2f", "\57\x44\x41\x59\117\106\115\x4f\x4e\124\x48\134\50\x5b\x5c\x73\135\52{$wpdb->posts}\134\x2e\160\157\x73\164\137\x64\x61\x74\x65\x5b\134\163\x5d\x2a\x5c\x29\x5b\134\163\x5d\52\x3d\133\134\x73\135\x2a" . $KZUd1 . "\57", "\57\115\117\116\124\110\x5c\50\133\134\x73\135\52{$wpdb->posts}\56\x70\x6f\x73\x74\x5f\144\141\x74\x65\x5b\134\163\x5d\52\x5c\x29\133\134\163\x5d\52\x3d\x5b\x5c\x73\135\52" . $fKdEM . "\x2f", "\57\110\x4f\x55\122\134\50\x5b\x5c\163\135\x2a{$wpdb->posts}\x2e\160\x6f\163\164\137\x64\x61\164\x65\x5b\x5c\x73\x5d\x2a\134\51\x5b\134\163\x5d\x2a\x3d\x5b\x5c\x73\x5d\x2a" . $cEbH0 . "\x2f", "\57\115\111\x4e\125\x54\105\x5c\50\133\x5c\x73\x5d\52{$wpdb->posts}\56\160\157\163\x74\x5f\144\141\x74\145\133\134\x73\135\x2a\134\51\133\134\x73\135\52\75\x5b\134\x73\135\x2a" . $pvYii . "\x2f", "\x2f\123\105\x43\x4f\x4e\x44\x5c\50\x5b\x5c\x73\x5d\x2a{$wpdb->posts}\x2e\160\157\x73\164\x5f\144\141\x74\x65\133\x5c\163\135\52\x5c\51\x5b\x5c\163\135\x2a\75\x5b\134\x73\135\52" . $vOcF4 . "\57"]; goto t2wOc; w1KKV: $KZUd1 = $wp_query->get("\144\141\171"); goto xQzWV; MnTJg: $K1Tto = preg_replace("\x2f\133\136\60\x2d\71\135\57", '', $K1Tto); goto a9VAF; w9mpD: $vOcF4 = substr($K1Tto, 12, 2); goto Npm_T; kqvhy: $fKdEM = $wp_query->get("\x6d\x6f\x6e\164\150\x6e\x75\x6d"); goto w1KKV; UhOxy: $pvYii = $wp_query->get("\155\x69\x6e\x75\164\x65"); goto bAfeS; bAfeS: $vOcF4 = $wp_query->get("\x73\x65\x63\157\156\144"); goto Zpkzb; KlnRw: fjcqI: goto RmG8y; t2wOc: $et2fo = preg_replace($SyPql, "\61\x3d\61", $et2fo); goto KlnRw; kz82G: $pvYii = substr($K1Tto, 10, 2); goto w9mpD; M4_1e: $e7EKc = $wp_query->get("\x79\x65\x61\162"); goto kqvhy; pJGxf: $cEbH0 = substr($K1Tto, 8, 2); goto kz82G; wUxyR: } public function updateNumberFormat() { goto pGUdn; sgm3H: $U6yxZ = $this->getSettingByKey(Setting::NUMBERS_DECIMAL_POINT); goto aHGjb; t8trJ: $this->locale = DecoratorUser::getLocale(); goto Tk6YH; JWja4: if (!$bf2AZ) { goto jyiy6; } goto CfKFl; qFJst: Craq8: goto X8hGP; aHGjb: $bf2AZ = $this->getSettingByKey(Setting::NUMBERS_THOUSAND_SEPARATOR); goto JWja4; fsZZI: $wp_locale->number_format["\144\x65\143\x69\x6d\141\154\137\160\157\151\x6e\x74"] = $U6yxZ; goto qFJst; X8hGP: xDDuI: goto svlhW; KVJTA: jyiy6: goto bh9mn; bh9mn: if (!$U6yxZ) { goto Craq8; } goto fsZZI; CfKFl: $wp_locale->number_format["\164\150\x6f\x75\x73\141\x6e\x64\x73\x5f\x73\x65\x70"] = $bf2AZ; goto KVJTA; pGUdn: global $wp_locale; goto t8trJ; Tk6YH: if (!$wp_locale instanceof WP_Locale) { goto xDDuI; } goto sgm3H; svlhW: } public function getLocale() : ?string { return $this->locale; } public function updateComment($FvGWt) { goto Fhc_r; Fhc_r: if ($FvGWt instanceof WP_Comment) { goto FrhNB; } goto USdd_; UmeAF: sXFuU: goto pGjOm; pGjOm: if ($FvGWt instanceof WP_Comment) { goto LMfgb; } goto PcKec; XGSPD: uFXOf: goto E1E_Q; IV1jl: xFElA: goto UmeAF; PcKec: $FvGWt = $AToy9; goto uMLm2; pz7qw: return $FvGWt; goto KbwfV; e_mRd: I8mfm: goto lcC6e; C3AAv: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto uFXOf; } goto I3gab; GdwIg: $AToy9 = $this->translateLetters($AToy9); goto IV1jl; CsBs2: goto I8mfm; goto sosfP; lcC6e: if (!($AToy9 && is_string($AToy9))) { goto sXFuU; } goto C3AAv; uMLm2: goto J7gn1; goto rNH19; I3gab: $AToy9 = $this->translateNumbers($AToy9); goto XGSPD; ni1yt: J7gn1: goto pz7qw; Hriir: $AToy9 = $FvGWt->comment_content; goto e_mRd; USdd_: $AToy9 = $FvGWt; goto CsBs2; sosfP: FrhNB: goto Hriir; p1t91: $FvGWt->comment_content = $AToy9; goto ni1yt; E1E_Q: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto xFElA; } goto GdwIg; rNH19: LMfgb: goto p1t91; KbwfV: } public function dateI18n($bMVl2, $QgPTM, $oUuk7) { goto oBP8d; NPjaw: Mx3Qx: goto bX32Q; bX32Q: WQABO: goto UHYnM; zKSTc: $oLQta = debug_backtrace(); goto FMXQs; oBP8d: if (!function_exists("\144\145\x62\x75\147\x5f\x62\x61\x63\153\164\x72\x61\x63\145")) { goto WQABO; } goto zKSTc; QSxbS: return $bMVl2; goto NPjaw; FMXQs: if (!$this->applyFilters($this->generateHook("\x64\151\163\141\x62\x6c\x65"), $oLQta)) { goto Mx3Qx; } goto QSxbS; UHYnM: return $this->persianDate($oUuk7, $QgPTM); goto BNxh0; BNxh0: } public function translateLetters($AToy9) { return $this->getTranslator()->arabic2persian($AToy9); } public function translateNumbers($AToy9) { return $this->getTranslator()->english2persian($AToy9); } public function setLocale($FFOOb) : ?string { goto Hi7Lu; fp6HC: return $FFOOb; goto JBgow; Hi7Lu: global $FFOOb; goto OA0Kv; OA0Kv: $FFOOb = "\146\x61\137\111\x52"; goto fp6HC; JBgow: } public function wpDate($TdUgk, $QgPTM, $KUiox) { goto pDI4p; pDI4p: if (!$TdUgk) { goto zgAL5; } goto YnvZg; jpyhs: zgAL5: goto xOzLn; xOzLn: return $TdUgk; goto Vg1fu; YnvZg: $TdUgk = $this->persianDate(date("\131\x2d\155\55\x64\40\110\72\x69\x3a\x73", $KUiox), $QgPTM); goto jpyhs; Vg1fu: } public function persianDate($hgWBY, $QgPTM = null, $FFOOb = "\146\x61") { goto uDhiw; VkgFH: $KUiox = strtotime($hgWBY); goto WPrAX; hHTmU: $QgPTM = ManipulateSetting::getTimeFormat(); goto XGz7C; HrOAy: if (empty($FFOOb) && !is_admin()) { goto WrmkC; } goto o4SkO; mTYYm: if (is_numeric($hgWBY)) { goto XBL30; } goto VkgFH; JCvFo: $KUiox = $hgWBY; goto DnEJ3; a1D63: $FFOOb = "\x65\156"; goto yn6c8; XGz7C: OU9fS: goto Y6d7h; L117e: XBL30: goto V4di8; aDLMA: $hgWBY = $this->getConverter()->date($QgPTM, $KUiox, $FFOOb); goto GWf6z; CvBBY: DlSqQ: goto JCvFo; yn6c8: goto HQq0K; goto Hblcz; NBHO6: HQq0K: goto aDLMA; xSJOQ: $FFOOb = "\146\141"; goto RV2yC; DnEJ3: goto kh6ah; goto L117e; Hblcz: EIZHt: goto xSJOQ; WPrAX: goto kh6ah; goto CvBBY; Y6d7h: if (!$KUiox) { goto kHuRP; } goto ANbFt; BLS8C: if (empty($FFOOb) && is_admin()) { goto M3O80; } goto bC_mS; ANbFt: if (empty($FFOOb) && is_admin() && $this->getSettingByKey(Setting::ADMIN_CONVERT_DATES)) { goto LwE9V; } goto BLS8C; V4di8: $KUiox = intval($hgWBY); goto f_diM; j8PDp: M3O80: goto a1D63; QTdEl: $FFOOb = "\145\156"; goto NBHO6; uDhiw: if (is_int($hgWBY)) { goto DlSqQ; } goto mTYYm; GWf6z: kHuRP: goto B31fS; P85fW: goto HQq0K; goto j8PDp; x357e: $FFOOb = "\146\x61"; goto P85fW; RV2yC: goto HQq0K; goto FJurK; xxa2n: LwE9V: goto x357e; B31fS: return $hgWBY; goto aeZFI; f_diM: kh6ah: goto C3HOn; o4SkO: goto HQq0K; goto xxa2n; FJurK: WrmkC: goto QTdEl; C3HOn: if ($QgPTM) { goto OU9fS; } goto hHTmU; bC_mS: if (empty($FFOOb) && !is_admin() && $this->getSettingByKey(Setting::FRONT_CONVERT_DATES)) { goto EIZHt; } goto HrOAy; aeZFI: } public function makeTime($qpHM3 = '', $K1Tto = '', $KtnrV = '', $ZsPNt = '', $lF2Yb = '', $F8pqV = '') { return $this->getConverter()->makeTime($qpHM3, $K1Tto, $KtnrV, $ZsPNt, $lF2Yb, $F8pqV); } }
