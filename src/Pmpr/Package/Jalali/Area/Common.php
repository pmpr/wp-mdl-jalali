<?php
 namespace Pmpr\Package\Jalali\Area; use Pmpr\Common\Foundation\Decorator\DecoratorI18N; use Pmpr\Common\Foundation\Decorator\DecoratorUser; use Pmpr\Common\Foundation\Manipulate\ManipulateSetting; use Pmpr\Common\Foundation\Manipulate\Taxonomy\ManipulateTerm; use Pmpr\Package\Jalali\Container; use Pmpr\Package\Jalali\Converter; use Pmpr\Package\Jalali\Setting; use Pmpr\Package\Jalali\Translator; use WP_Comment; use WP_Locale; class Common extends Container { protected ?string $locale = null; protected ?Converter $converter = null; protected ?Translator $translator = null; public function __construct() { goto FeIHZ; TUIkB: parent::__construct(); goto VoN4r; FeIHZ: $this->converter = Converter::getInstance(); goto wAsyW; wAsyW: $this->translator = Translator::getInstance(); goto TUIkB; VoN4r: } public function getConverter() : ?Converter { return $this->converter; } public function getTranslator() : ?Translator { return $this->translator; } public function addActions() { $this->addAction("\151\x6e\x69\x74", [$this, "\151\x6e\x69\164"]); parent::addActions(); } public function addFilters() { $this->addFilter("\x67\145\x74\137\164\145\162\x6d", [$this, "\x67\145\164\124\x65\x72\x6d"])->addFilter("\147\145\164\x5f\143\x6f\155\155\145\x6e\x74", [$this, "\x75\160\x64\141\x74\145\x43\157\x6d\155\145\x6e\164"])->addFilter("\154\157\143\141\154\x65", [$this, "\163\145\x74\114\x6f\143\x61\154\x65"], 10)->addFilter("\x67\145\164\x5f\164\x68\145\x5f\144\x61\164\x65", [$this, "\160\145\x72\163\151\x61\x6e\x44\141\164\145"], 99, 3); parent::addFilters(); } public function init() { $this->updateNumberFormat(); } public function translateWord($FhyF5, $r8wFj = "\146\x61") { goto faA6e; kqSFg: return $this->getTranslator()->translate($FhyF5, $r8wFj); goto ou3J1; e0tuW: DBjox: goto kqSFg; rxUU4: $r8wFj = DecoratorI18N::getLocale(); goto e0tuW; faA6e: if ($r8wFj) { goto DBjox; } goto rxUU4; ou3J1: } public function translateNumber($IjoP9, $r8wFj = "\x66\x61", $t3z8Z = "\xd9\253") { goto nfMte; nfMte: if ($r8wFj) { goto qCDB7; } goto lluaC; Vy8iw: qCDB7: goto E8W4i; E8W4i: return $this->getTranslator()->translateNumber($IjoP9, $r8wFj, $t3z8Z); goto dvgvq; lluaC: $r8wFj = DecoratorI18N::getLocale(); goto Vy8iw; dvgvq: } public function getTerm($oMFrV) { goto nI8Ro; xf5u6: return $oMFrV; goto NZCPt; lc5o8: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto ZPVLq; } goto z_mkW; FGhug: $oMFrV->name = $this->translateNumbers($oMFrV->name); goto m9ZqZ; m9ZqZ: R03ji: goto lc5o8; pKGyL: if (!$oMFrV) { goto DqPQL; } goto VBXgl; DoNpx: ZPVLq: goto veHv1; veHv1: DqPQL: goto xf5u6; z_mkW: $oMFrV->name = $this->translateLetters($oMFrV->name); goto DoNpx; nI8Ro: $oMFrV = ManipulateTerm::get($oMFrV); goto pKGyL; VBXgl: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto R03ji; } goto FGhug; NZCPt: } public function postsWhere($xaewA) { goto rGKuJ; d775N: if (!($qkxZL != '' && $qkxZL != "\60")) { goto PcYMf; } goto vc1O1; f36gh: mdKnr: goto W4u04; Yj14o: if (is_null($wp_query)) { goto mdKnr; } goto P964u; tUCHG: $yLAko = substr($qkxZL, 0, 4); goto EACYs; Goa7h: $peoRW = $wp_query->get("\155\151\x6e\165\x74\145"); goto R725F; AlU2D: $peoRW = substr($qkxZL, 10, 2); goto fjni1; fjni1: $Nd8n1 = substr($qkxZL, 12, 2); goto Qov8t; iXiwp: $hzJk_ = $wp_query->get("\x6d\x6f\156\x74\150\x6e\165\155"); goto lT7ZY; W4u04: return $xaewA; goto OqxQp; rGKuJ: global $wpdb, $wp_query; goto Yj14o; gXNpv: G38fm: goto f36gh; dYExF: $xaewA = preg_replace($igOyG, "\x31\75\x31", $xaewA); goto gXNpv; KmZ8e: if (!($yLAko < 1700 && $yLAko > 1300)) { goto G38fm; } goto jXO1k; Qov8t: PcYMf: goto KmZ8e; EACYs: $hzJk_ = substr($qkxZL, 4, 2); goto AiRVB; wldcM: $hIo9p = substr($qkxZL, 8, 2); goto AlU2D; R725F: $Nd8n1 = $wp_query->get("\163\x65\143\x6f\156\x64"); goto d775N; vc1O1: $qkxZL = preg_replace("\57\x5b\x5e\60\x2d\71\x5d\57", '', $qkxZL); goto tUCHG; lT7ZY: $tDWA8 = $wp_query->get("\x64\x61\171"); goto vzf3F; P964u: $qkxZL = $wp_query->get("\155"); goto aiYf4; AiRVB: $tDWA8 = substr($qkxZL, 6, 2); goto wldcM; jXO1k: $igOyG = ["\57\x59\105\x41\122\x5c\50\x5b\x5c\163\135\52{$wpdb->posts}\56\160\x6f\x73\164\137\x64\x61\x74\145\x5b\x5c\x73\x5d\52\134\x29\133\x5c\x73\135\x2a\x3d\x5b\x5c\163\135\x2a" . $yLAko . "\x2f", "\x2f\104\101\x59\x4f\106\x4d\x4f\116\124\110\x5c\x28\133\134\x73\x5d\52{$wpdb->posts}\x5c\56\x70\157\163\x74\x5f\144\141\164\x65\x5b\134\163\x5d\52\134\x29\133\134\163\x5d\x2a\75\x5b\x5c\x73\135\52" . $tDWA8 . "\57", "\x2f\x4d\x4f\x4e\x54\x48\x5c\50\133\x5c\x73\x5d\x2a{$wpdb->posts}\x2e\160\157\x73\164\x5f\x64\x61\x74\x65\133\134\x73\x5d\x2a\x5c\51\x5b\134\x73\x5d\x2a\x3d\133\x5c\x73\x5d\x2a" . $hzJk_ . "\57", "\x2f\x48\x4f\x55\122\134\50\133\x5c\x73\x5d\x2a{$wpdb->posts}\x2e\x70\157\x73\x74\x5f\x64\141\x74\x65\x5b\134\163\135\52\134\51\x5b\134\163\135\x2a\x3d\x5b\x5c\x73\x5d\x2a" . $hIo9p . "\57", "\x2f\x4d\111\x4e\125\124\105\134\50\133\x5c\163\x5d\52{$wpdb->posts}\x2e\160\157\x73\164\137\144\141\x74\145\x5b\x5c\163\135\x2a\x5c\x29\133\134\x73\x5d\x2a\75\133\134\163\x5d\52" . $peoRW . "\x2f", "\x2f\x53\105\x43\117\116\104\x5c\50\133\x5c\163\x5d\x2a{$wpdb->posts}\56\x70\x6f\x73\x74\137\x64\x61\164\x65\133\x5c\x73\135\x2a\x5c\51\x5b\x5c\x73\135\52\x3d\133\x5c\163\135\52" . $Nd8n1 . "\57"]; goto dYExF; aiYf4: $yLAko = $wp_query->get("\x79\145\x61\162"); goto iXiwp; vzf3F: $hIo9p = $wp_query->get("\150\157\165\162"); goto Goa7h; OqxQp: } public function updateNumberFormat() { goto xFee6; r3TJ8: KMrE3: goto yxFBm; DZCFC: $C9QSd = $this->getSettingByKey(Setting::NUMBERS_DECIMAL_POINT); goto atDLh; yxFBm: ON1UB: goto hjiLe; Lpw2M: $wp_locale->number_format["\164\150\x6f\x75\163\x61\x6e\x64\x73\137\x73\145\x70"] = $l8U4i; goto T90al; xFee6: global $wp_locale; goto FExx4; gVv8m: if (!$C9QSd) { goto KMrE3; } goto FD7VE; T90al: FWMN0: goto gVv8m; atDLh: $l8U4i = $this->getSettingByKey(Setting::NUMBERS_THOUSAND_SEPARATOR); goto VGekR; FD7VE: $wp_locale->number_format["\x64\x65\x63\151\155\x61\154\137\x70\x6f\151\156\164"] = $C9QSd; goto r3TJ8; VGekR: if (!$l8U4i) { goto FWMN0; } goto Lpw2M; u2IUQ: if (!$wp_locale instanceof WP_Locale) { goto ON1UB; } goto DZCFC; FExx4: $this->locale = DecoratorUser::getLocale(); goto u2IUQ; hjiLe: } public function getLocale() : ?string { return $this->locale; } public function updateComment($USdxe) { goto EJeg0; hwzrd: cc2gu: goto giwep; cfGMF: NsIdn: goto ROr10; giwep: $iCTb3 = $USdxe->comment_content; goto eDZD_; vExCz: $iCTb3 = $this->translateNumbers($iCTb3); goto wTAHd; Ja86G: if ($USdxe instanceof WP_Comment) { goto wtXpU; } goto vkxOu; vkxOu: $USdxe = $iCTb3; goto B4ylU; M6X8p: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto NsIdn; } goto B61P0; XB6_q: return $USdxe; goto mi_Uh; pIdzx: goto ND0ZO; goto hwzrd; hHM4j: wtXpU: goto hK_Qr; EJeg0: if ($USdxe instanceof WP_Comment) { goto cc2gu; } goto M2SvT; B61P0: $iCTb3 = $this->translateLetters($iCTb3); goto cfGMF; ROr10: vJKQm: goto Ja86G; x2Q2i: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto eC5Pa; } goto vExCz; M2SvT: $iCTb3 = $USdxe; goto pIdzx; hK_Qr: $USdxe->comment_content = $iCTb3; goto VTqrI; wTAHd: eC5Pa: goto M6X8p; B4ylU: goto AI8Nt; goto hHM4j; VTqrI: AI8Nt: goto XB6_q; uaOBt: if (!($iCTb3 && is_string($iCTb3))) { goto vJKQm; } goto x2Q2i; eDZD_: ND0ZO: goto uaOBt; mi_Uh: } public function dateI18n($nVdR7, $bhivc, $ikzN7) { goto H3lpo; LSHpO: return $nVdR7; goto HZ4mU; B4kaV: if (!$this->applyFilters($this->generateHook("\144\x69\163\x61\x62\154\x65"), $XJWeh)) { goto RXyx0; } goto LSHpO; HZ4mU: RXyx0: goto sGGO9; Y00Go: return $this->persianDate($ikzN7, $bhivc); goto lx84w; H3lpo: if (!function_exists("\x64\x65\142\165\x67\x5f\142\x61\143\x6b\x74\162\x61\x63\145")) { goto fDP9i; } goto a2uoA; sGGO9: fDP9i: goto Y00Go; a2uoA: $XJWeh = debug_backtrace(); goto B4kaV; lx84w: } public function translateLetters($iCTb3) { return $this->getTranslator()->arabic2persian($iCTb3); } public function translateNumbers($iCTb3) { return $this->getTranslator()->english2persian($iCTb3); } public function setLocale($r8wFj) : ?string { goto K59UX; QZ4N5: $r8wFj = "\146\141\137\111\122"; goto T_eQY; K59UX: global $r8wFj; goto QZ4N5; T_eQY: return $r8wFj; goto CL0ZL; CL0ZL: } public function wpDate($FQx66, $bhivc, $M3Smh) { goto SZ44t; SZ44t: if (!$FQx66) { goto DHc2v; } goto lLRtL; aiSTT: DHc2v: goto Ik2jN; Ik2jN: return $FQx66; goto NVqsD; lLRtL: $FQx66 = $this->persianDate(date("\131\55\155\55\144\x20\x48\72\x69\x3a\163", $M3Smh), $bhivc); goto aiSTT; NVqsD: } public function persianDate($Hwm28, $bhivc = null, $r8wFj = "\146\141") { goto qJ9yp; ns9dq: if (empty($r8wFj) && !is_admin() && $this->getSettingByKey(Setting::FRONT_CONVERT_DATES)) { goto WjuBd; } goto yTz0B; nfjj2: goto YOwjs; goto jNPYV; MIpIm: $M3Smh = $Hwm28; goto Q7We1; yTz0B: if (empty($r8wFj) && !is_admin()) { goto Dkof4; } goto vM2rP; ENFxo: if (is_numeric($Hwm28)) { goto yvWQr; } goto q8Eq8; K7GVB: if ($bhivc) { goto YtTJU; } goto XyJgF; iZsPi: goto YOwjs; goto HAhKN; FRXeD: M9ReR: goto MIpIm; Rmjfw: $r8wFj = "\145\156"; goto iZsPi; IGJ3h: lrOJK: goto K7GVB; GvOGr: $r8wFj = "\x66\141"; goto nfjj2; fzQk5: $M3Smh = intval($Hwm28); goto IGJ3h; oadv5: YOwjs: goto mG3pL; vM2rP: goto YOwjs; goto NsDAh; qNXKZ: goto YOwjs; goto v1wzu; qJ9yp: if (is_int($Hwm28)) { goto M9ReR; } goto ENFxo; Q7We1: goto lrOJK; goto lwxss; K1WYy: if (!$M3Smh) { goto lXI0E; } goto me2nd; me2nd: if (empty($r8wFj) && is_admin() && $this->getSettingByKey(Setting::ADMIN_CONVERT_DATES)) { goto R1WM2; } goto etT7w; y6PHm: return $Hwm28; goto O7aPf; GMIJE: goto lrOJK; goto FRXeD; l0AW2: $r8wFj = "\146\141"; goto qNXKZ; lwxss: yvWQr: goto fzQk5; dNuT7: lXI0E: goto y6PHm; mG3pL: $Hwm28 = $this->getConverter()->date($bhivc, $M3Smh, $r8wFj); goto dNuT7; zVjg3: $r8wFj = "\x65\x6e"; goto oadv5; v1wzu: NLmgf: goto Rmjfw; pI2K2: YtTJU: goto K1WYy; q8Eq8: $M3Smh = strtotime($Hwm28); goto GMIJE; jNPYV: Dkof4: goto zVjg3; XyJgF: $bhivc = ManipulateSetting::getTimeFormat(); goto pI2K2; HAhKN: WjuBd: goto GvOGr; NsDAh: R1WM2: goto l0AW2; etT7w: if (empty($r8wFj) && is_admin()) { goto NLmgf; } goto ns9dq; O7aPf: } public function makeTime($gr4la = '', $qkxZL = '', $MmU9n = '', $YxQZd = '', $vR3QA = '', $pkpWm = '') { return $this->getConverter()->makeTime($gr4la, $qkxZL, $MmU9n, $YxQZd, $vR3QA, $pkpWm); } }
