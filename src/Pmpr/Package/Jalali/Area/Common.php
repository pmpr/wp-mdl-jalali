<?php
 namespace Pmpr\Package\Jalali\Area; use Pmpr\Common\Foundation\Decorator\DecoratorI18N; use Pmpr\Common\Foundation\Decorator\DecoratorUser; use Pmpr\Common\Foundation\Manipulate\ManipulateSetting; use Pmpr\Common\Foundation\Manipulate\Taxonomy\ManipulateTerm; use Pmpr\Package\Jalali\Container; use Pmpr\Package\Jalali\Converter; use Pmpr\Package\Jalali\Setting; use Pmpr\Package\Jalali\Translator; use WP_Comment; use WP_Locale; class Common extends Container { protected ?string $locale = null; protected ?Converter $converter = null; protected ?Translator $translator = null; public function __construct() { $this->converter = Converter::getInstance(); $this->translator = Translator::getInstance(); parent::__construct(); } public function getConverter() : ?Converter { return $this->converter; } public function getTranslator() : ?Translator { return $this->translator; } public function addActions() { $this->addAction("\x69\x6e\151\164", [$this, "\x69\x6e\x69\x74"]); parent::addActions(); } public function addFilters() { $this->addFilter("\147\x65\164\x5f\164\x65\x72\x6d", [$this, "\147\x65\164\x54\145\162\155"])->addFilter("\147\145\x74\137\143\x6f\155\x6d\145\x6e\x74", [$this, "\165\x70\x64\x61\164\145\x43\157\155\155\x65\x6e\x74"])->addFilter("\x6c\157\143\141\154\x65", [$this, "\x73\145\x74\114\x6f\143\x61\154\x65"], 10)->addFilter("\x67\x65\164\x5f\164\x68\x65\137\144\x61\x74\x65", [$this, "\160\x65\x72\x73\151\x61\x6e\104\141\x74\x65"], 99, 3); parent::addFilters(); } public function init() { $this->updateNumberFormat(); } public function translateWord($V2BGP, $HgXrw = "\146\141") { if ($HgXrw) { goto oMEc6; } $HgXrw = DecoratorI18N::getLocale(); oMEc6: return $this->getTranslator()->translate($V2BGP, $HgXrw); } public function translateNumber($qXeD1, $HgXrw = "\x66\141", $rYEZ1 = "\xd9\xab") { if ($HgXrw) { goto cx86I; } $HgXrw = DecoratorI18N::getLocale(); cx86I: return $this->getTranslator()->translateNumber($qXeD1, $HgXrw, $rYEZ1); } public function getTerm($oLakf) { $oLakf = ManipulateTerm::get($oLakf); if (!$oLakf) { goto wVU77; } if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto XSxvw; } $oLakf->name = $this->translateNumbers($oLakf->name); XSxvw: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto cL20q; } $oLakf->name = $this->translateLetters($oLakf->name); cL20q: wVU77: return $oLakf; } public function postsWhere($kayT7) { global $wpdb, $wp_query; if (is_null($wp_query)) { goto h2_90; } $ewMJr = $wp_query->get("\155"); $BOQ31 = $wp_query->get("\x79\145\141\x72"); $cKBgb = $wp_query->get("\155\x6f\156\x74\x68\x6e\165\155"); $DAD0z = $wp_query->get("\x64\x61\171"); $beZGP = $wp_query->get("\x68\x6f\165\162"); $Lznk_ = $wp_query->get("\x6d\151\x6e\x75\x74\145"); $zH3k8 = $wp_query->get("\163\145\143\157\x6e\144"); if (!($ewMJr != '' && $ewMJr != "\x30")) { goto rzv_2; } $ewMJr = preg_replace("\x2f\x5b\x5e\60\x2d\71\x5d\57", '', $ewMJr); $BOQ31 = substr($ewMJr, 0, 4); $cKBgb = substr($ewMJr, 4, 2); $DAD0z = substr($ewMJr, 6, 2); $beZGP = substr($ewMJr, 8, 2); $Lznk_ = substr($ewMJr, 10, 2); $zH3k8 = substr($ewMJr, 12, 2); rzv_2: if (!($BOQ31 < 1700 && $BOQ31 > 1300)) { goto Mapyt; } $ESGVk = ["\x2f\x59\x45\x41\122\134\50\x5b\x5c\163\x5d\x2a{$wpdb->posts}\56\x70\x6f\x73\164\x5f\x64\x61\x74\x65\x5b\x5c\x73\135\x2a\x5c\51\x5b\x5c\x73\135\x2a\x3d\133\134\x73\135\52" . $BOQ31 . "\x2f", "\57\x44\101\131\x4f\106\x4d\x4f\x4e\x54\110\134\x28\x5b\134\x73\x5d\x2a{$wpdb->posts}\x5c\56\x70\157\163\x74\137\144\141\164\145\x5b\x5c\x73\135\x2a\134\x29\133\134\163\x5d\52\x3d\133\134\163\x5d\x2a" . $DAD0z . "\57", "\x2f\115\117\x4e\124\110\134\50\133\x5c\x73\135\x2a{$wpdb->posts}\x2e\160\x6f\163\164\x5f\x64\141\164\145\133\134\x73\x5d\52\x5c\x29\x5b\134\163\x5d\x2a\x3d\133\x5c\163\x5d\52" . $cKBgb . "\x2f", "\57\x48\x4f\x55\x52\134\50\x5b\x5c\163\x5d\x2a{$wpdb->posts}\56\x70\x6f\x73\164\137\144\x61\164\x65\x5b\x5c\163\135\x2a\x5c\51\x5b\134\x73\x5d\x2a\x3d\133\134\163\135\52" . $beZGP . "\x2f", "\57\x4d\111\116\125\x54\x45\x5c\50\133\134\x73\x5d\52{$wpdb->posts}\56\x70\157\163\164\x5f\x64\141\164\145\x5b\134\x73\135\x2a\134\x29\x5b\134\163\x5d\x2a\75\133\x5c\163\x5d\x2a" . $Lznk_ . "\x2f", "\57\123\x45\x43\117\116\x44\134\50\133\x5c\x73\135\x2a{$wpdb->posts}\x2e\x70\157\x73\x74\x5f\144\x61\x74\145\x5b\134\x73\135\52\134\51\x5b\134\x73\135\52\75\x5b\134\163\x5d\x2a" . $zH3k8 . "\x2f"]; $kayT7 = preg_replace($ESGVk, "\x31\75\61", $kayT7); Mapyt: h2_90: return $kayT7; } public function updateNumberFormat() { global $EULSU; $this->locale = DecoratorUser::getLocale(); if (!$EULSU instanceof WP_Locale) { goto yG1t5; } $hrYo4 = $this->getSettingByKey(Setting::NUMBERS_DECIMAL_POINT); $lkAbM = $this->getSettingByKey(Setting::NUMBERS_THOUSAND_SEPARATOR); if (!$lkAbM) { goto qaMAC; } $EULSU->number_format["\x74\x68\157\165\163\141\156\144\163\x5f\x73\145\160"] = $lkAbM; qaMAC: if (!$hrYo4) { goto LTX4R; } $EULSU->number_format["\x64\x65\x63\x69\155\x61\x6c\x5f\160\x6f\x69\156\164"] = $hrYo4; LTX4R: yG1t5: } public function getLocale() : ?string { return $this->locale; } public function updateComment($xnnw2) { if ($xnnw2 instanceof WP_Comment) { goto VOIBN; } $CTkok = $xnnw2; goto W11cd; VOIBN: $CTkok = $xnnw2->comment_content; W11cd: if (!($CTkok && is_string($CTkok))) { goto iQUbq; } if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_NUMBERS)) { goto uBtzS; } $CTkok = $this->translateNumbers($CTkok); uBtzS: if (!$this->getSettingByKey(Setting::ADMIN_CONVERT_LETTERS)) { goto bZwWy; } $CTkok = $this->translateLetters($CTkok); bZwWy: iQUbq: if ($xnnw2 instanceof WP_Comment) { goto pSpYD; } $xnnw2 = $CTkok; goto fQZU3; pSpYD: $xnnw2->comment_content = $CTkok; fQZU3: return $xnnw2; } public function dateI18n($cDdem, $YJdNP, $O7HN4) { if (!function_exists("\x64\145\x62\x75\x67\x5f\142\x61\x63\x6b\164\x72\141\143\145")) { goto hY7KA; } $HN9yT = debug_backtrace(); if (!$this->applyFilters($this->generateHook("\x64\x69\x73\x61\142\154\x65"), $HN9yT)) { goto FZbRX; } return $cDdem; FZbRX: hY7KA: return $this->persianDate($O7HN4, $YJdNP); } public function translateLetters($CTkok) { return $this->getTranslator()->arabic2persian($CTkok); } public function translateNumbers($CTkok) { return $this->getTranslator()->english2persian($CTkok); } public function setLocale($HgXrw) : ?string { global $HgXrw; $HgXrw = "\146\141\x5f\x49\122"; return $HgXrw; } public function wpDate($mwY1F, $YJdNP, $d_mzn) { if (!$mwY1F) { goto bb7bD; } $mwY1F = $this->persianDate(date("\x59\x2d\x6d\55\144\40\x48\x3a\151\x3a\163", $d_mzn), $YJdNP); bb7bD: return $mwY1F; } public function persianDate($G3VfU, $YJdNP = null, $HgXrw = "\x66\x61") { if (is_int($G3VfU)) { goto St7zp; } if (is_numeric($G3VfU)) { goto gigDY; } $d_mzn = strtotime($G3VfU); goto m0080; St7zp: $d_mzn = $G3VfU; goto m0080; gigDY: $d_mzn = intval($G3VfU); m0080: if ($YJdNP) { goto Rx690; } $YJdNP = ManipulateSetting::getTimeFormat(); Rx690: if (!$d_mzn) { goto RIHkG; } if (empty($HgXrw) && is_admin() && $this->getSettingByKey(Setting::ADMIN_CONVERT_DATES)) { goto pJ3Oc; } if (empty($HgXrw) && is_admin()) { goto dDB8G; } if (empty($HgXrw) && !is_admin() && $this->getSettingByKey(Setting::FRONT_CONVERT_DATES)) { goto Webfs; } if (empty($HgXrw) && !is_admin()) { goto LdpgB; } goto yll0b; pJ3Oc: $HgXrw = "\146\141"; goto yll0b; dDB8G: $HgXrw = "\145\156"; goto yll0b; Webfs: $HgXrw = "\x66\x61"; goto yll0b; LdpgB: $HgXrw = "\145\156"; yll0b: $G3VfU = $this->getConverter()->date($YJdNP, $d_mzn, $HgXrw); RIHkG: return $G3VfU; } public function makeTime($cwOO3 = '', $ewMJr = '', $oi0Su = '', $L9mnq = '', $xyzrl = '', $PmuS0 = '') { return $this->getConverter()->makeTime($cwOO3, $ewMJr, $oi0Su, $L9mnq, $xyzrl, $PmuS0); } }
